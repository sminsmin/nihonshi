function toggleSaveLoadButton(){"block"==$("#save-load-buttons").css("display")?($("#save-load-buttons").slideUp("fast"),$("#save-load-message").hide()):($("#save-load-buttons").slideDown("fast"),$("#save-load-message").show())}function saveEntryData(e){if(!window.localStorage)return!1;if(!confirm("現在の入力内容を保存します。\nよろしいですか？"))return!1;var a=$("input:text, input[type=email], textarea, select"),t=new Array;t[0]=(new Date).getTime();var s=1,o="";a.each(function(){""!=$(this).val()&&(o=(o=(o=$(this).val()).replace(/_\[\=\]_/i,"_[＝]_")).replace(/_\[\,\]_/i,"_[，]_"),t[s++]=$(this).attr("id")+"_[=]_"+o)}),(a=$("input:checked")).each(function(){t[s++]=$(this).attr("id")+"_[=]_@checked"}),localStorage.setItem(e,t.join("_[,]_"));var l=new Date,i=l.getFullYear()+"/"+("0"+(l.getMonth()+1)).slice(-2)+"/"+("0"+l.getDate()).slice(-2)+" "+("0"+l.getHours()).slice(-2)+":"+("0"+l.getMinutes()).slice(-2);return $("#save-load-date").html(i),$("#save-load-message").show(),$("#save-load-message").html('<span style="color: blue">保存しました</span>'),setTimeout("$('#save-load-buttons').slideUp(1000)",2500),setTimeout("$('#save-load-message').slideUp(1000)",2500),setTimeout("$('#save-load-message').html('')",3e3),!0}function loadEntryData(e){if(!window.localStorage)return!1;if("未保存"==$("#save-load-date").text())return alert("保存されているデータはありません"),!1;if(!confirm("保存されているデータを読込みます。\nよろしいですか？"))return!1;var a=localStorage.getItem(e);if(null==a)return!1;var t,s=new Array;for(s=a.split("_[,]_"),t=1;t<s.length;t++)kv=s[t].split("_[=]_"),elemId=kv[0],elemVal=kv[1],"@checked"==elemVal?$("#"+elemId).attr("checked","checked"):$("#"+elemId).val(elemVal);if($("#shoppingform-table").length)for(goodsListSize=$("input[name=goodsListSize]").val(),t=0;t<goodsListSize;t++)$("#goodsAmount_"+t).trigger("blur");return $("#save-load-message").show(),$("#save-load-message").html('<span style="color: blue;">読込みました</span>'),setTimeout("$('#save-load-buttons').slideUp(1000)",2500),setTimeout("$('#save-load-message').slideUp(1000)",2500),setTimeout("$('#save-load-message').html('')",3e3),!0}function removeEntryData(e){return!!window.localStorage&&("未保存"==$("#save-load-date").text()?(alert("保存されているデータはありません"),!1):!!confirm("保存されているデータを削除します。\nよろしいですか？")&&(localStorage.removeItem(e),$("#save-load-message").show(),$("#save-load-message").html('<span style="color: blue;">削除しました</span>'),setTimeout("$('#save-load-buttons').slideUp(1000)",2500),setTimeout("$('#save-load-message').slideUp(1000)",2500),setTimeout("$('#save-load-message').html('')",3e3),$("#save-load-date").html("未保存"),!0))}function storageAvailable(e){try{var a=window[e],t="__storage_test__";return a.setItem(t,t),a.removeItem(t),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==a.length}}$(function(){if(storageAvailable("localStorage")){var e=$("#formId").val(),a=localStorage.getItem(e);if(null!=a){var t=new Array;t=a.split("_[,]_");var s=new Date;s.setTime(t[0]);var o=s.getFullYear()+"/"+("0"+(s.getMonth()+1)).slice(-2)+"/"+("0"+s.getDate()).slice(-2)+" "+("0"+s.getHours()).slice(-2)+":"+("0"+s.getMinutes()).slice(-2);0==$("#error-message").length&&(0<$("#partingNum").val()||($("#save-load-message").html("保存データがあります"),setTimeout("$('#save-load-message').fadeOut(1000)",6e3))),$("#save-load-date").html(o)}else $("#save-load-date").html("未保存")}else $("#save-load-layer").css("position","absolute"),$("#save-load-message").hide(),$("#save-load-buttons").html('<p style="color: red; background-color: #fff;">このブラウザでは保存機能は動作しません。</p>'),setTimeout("$('#save-load-layer').fadeOut(1000)",8e3);if(location.href.match(/\/fgen\//)){var l=navigator.userAgent;"iPhone"!=l.match(/iPhone/)&&"iPod"!=l.match(/iPod/)&&"Android"!=l.match(/Android/)||$("#save-load-layer").css("position","absolute")}location.href.match(/\/sfgen\//)&&$("body").css("padding-top","44px")});
//# sourceMappingURL=form-save-user-entry.min.js.map
